{
 "actions": [],
 "creation": "2025-06-21 22:45:07.030425",
 "doctype": "DocType",
 "document_type": "Setup",
 "editable_grid": 1,
 "engine": "InnoDB",
 "field_order": [
  "general_tab",
  "server_enabled",
  "mcp_endpoint_url",
  "oauth_discovery_url",
  "plugins_tab",
  "plugins_section",
  "enabled_plugins_list",
  "plugin_status_html",
  "streaming_tab",
  "streaming_section",
  "enforce_artifact_streaming",
  "response_limit_prevention",
  "streaming_behavior_instructions",
  "streaming_line_threshold",
  "streaming_char_threshold",
  "mcp_configuration_tab",
  "mcp_section",
  "mcp_server_name",
  "mcp_protocol_version",
  "mcp_transport_type",
  "oauth_tab",
  "oauth_authorization_section",
  "enable_dynamic_client_registration",
  "allowed_public_client_origins",
  "oauth_advanced_section",
  "show_auth_server_metadata",
  "show_protected_resource_metadata",
  "oauth_metadata_section",
  "resource_name",
  "resource_documentation",
  "oauth_column_break_2",
  "resource_policy_uri",
  "resource_tos_uri",
  "scopes_supported"
 ],
 "fields": [
  {
   "fieldname": "general_tab",
   "fieldtype": "Tab Break",
   "label": "General"
  },
  {
   "default": "1",
   "description": "Enable or disable the Frappe Assistant Core MCP server",
   "fieldname": "server_enabled",
   "fieldtype": "Check",
   "label": "Enable Assistant Core"
  },
  {
   "fieldname": "mcp_endpoint_url",
   "fieldtype": "Data",
   "label": "MCP Endpoint URL",
   "read_only": 1,
   "description": "Main MCP StreamableHTTP endpoint URL. Use this URL when connecting Claude Desktop or MCP Inspector."
  },
  {
   "fieldname": "oauth_discovery_url",
   "fieldtype": "Data",
   "label": "OAuth Discovery URL",
   "read_only": 1,
   "description": "OAuth/OIDC discovery endpoint for auto-configuration. MCP clients use this to discover authentication endpoints."
  },
  {
   "fieldname": "plugins_tab",
   "fieldtype": "Tab Break",
   "label": "Plugins & Tools"
  },
  {
   "fieldname": "plugins_section",
   "fieldtype": "Section Break",
   "label": "Plugin Configuration",
   "description": "Manage MCP tool plugins. Plugins extend the MCP server with additional tools and capabilities."
  },
  {
   "default": "[\"core\"]",
   "fieldname": "enabled_plugins_list",
   "fieldtype": "JSON",
   "hidden": 1,
   "label": "Enabled Plugins",
   "description": "Internal list of enabled plugin IDs"
  },
  {
   "fieldname": "plugin_status_html",
   "fieldtype": "HTML",
   "label": "Plugin Status",
   "options": "<div id=\"plugin-status-container\">Loading plugin information...</div>",
   "description": "Current status of installed plugins and available tools"
  },
  {
   "fieldname": "streaming_tab",
   "fieldtype": "Tab Break",
   "label": "Streaming"
  },
  {
   "fieldname": "streaming_section",
   "fieldtype": "Section Break",
   "label": "Artifact Streaming Configuration",
   "description": "Configure how Claude handles large tool responses using artifacts to prevent hitting response limits."
  },
  {
   "default": "1",
   "description": "Require Claude to use artifact streaming for data analysis operations. When enabled, large results are automatically streamed to artifacts instead of being included inline.",
   "fieldname": "enforce_artifact_streaming",
   "fieldtype": "Check",
   "label": "Enforce Artifact Streaming Protocol"
  },
  {
   "default": "1",
   "description": "Automatically trigger artifact streaming when tool results exceed the thresholds below. Prevents Claude from hitting response limits on large datasets.",
   "fieldname": "response_limit_prevention",
   "fieldtype": "Check",
   "label": "Enable Response Limit Prevention"
  },
  {
   "default": "Always create analysis workspace artifacts before performing data analysis.\nStream all detailed work to artifacts to prevent response limits.\nKeep responses minimal with artifact references.\nBuild unlimited analysis depth via progressive artifact updates.",
   "description": "Custom instructions sent to Claude about streaming behavior. These instructions guide how Claude structures responses when working with large datasets.",
   "fieldname": "streaming_behavior_instructions",
   "fieldtype": "Small Text",
   "label": "Custom Streaming Instructions"
  },
  {
   "default": "5",
   "description": "Minimum number of lines in a tool result that triggers artifact streaming (when Response Limit Prevention is enabled)",
   "fieldname": "streaming_line_threshold",
   "fieldtype": "Int",
   "label": "Line Threshold for Streaming"
  },
  {
   "default": "1000",
   "description": "Minimum number of characters in a tool result that triggers artifact streaming (when Response Limit Prevention is enabled)",
   "fieldname": "streaming_char_threshold",
   "fieldtype": "Int",
   "label": "Character Threshold for Streaming"
  },
  {
   "fieldname": "mcp_configuration_tab",
   "fieldtype": "Tab Break",
   "label": "MCP Configuration"
  },
  {
   "fieldname": "mcp_section",
   "fieldtype": "Section Break",
   "label": "MCP Server Settings",
   "description": "Configure MCP (Model Context Protocol) server identity and capabilities. These values are reported to MCP clients during initialization and discovery."
  },
  {
   "fieldname": "mcp_server_name",
   "fieldtype": "Data",
   "label": "MCP Server Name",
   "default": "frappe-assistant-core",
   "description": "Unique identifier for this MCP server instance. Used in MCP initialization handshake."
  },
  {
   "fieldname": "mcp_protocol_version",
   "fieldtype": "Data",
   "label": "MCP Protocol Version",
   "read_only": 1,
   "default": "2025-03-26",
   "description": "MCP specification version this server implements. Currently supports 2025-03-26."
  },
  {
   "fieldname": "mcp_transport_type",
   "fieldtype": "Data",
   "label": "Transport Type",
   "read_only": 1,
   "default": "StreamableHTTP",
   "description": "Transport protocol used for MCP communication. StreamableHTTP enables OAuth-based authentication."
  },
  {
   "fieldname": "oauth_tab",
   "fieldtype": "Tab Break",
   "label": "OAuth"
  },
  {
   "fieldname": "oauth_authorization_section",
   "fieldtype": "Section Break",
   "label": "OAuth Configuration",
   "description": "Configure OAuth 2.0 settings for MCP clients (e.g., Claude Desktop, MCP Inspector)"
  },
  {
   "default": "1",
   "description": "Enable automatic OAuth client registration for MCP tools. When enabled, tools like MCP Inspector can connect without manual OAuth client setup.",
   "fieldname": "enable_dynamic_client_registration",
   "fieldtype": "Check",
   "label": "Enable Dynamic Client Registration"
  },
  {
   "description": "<b>⚠️ EXPERIMENTAL - Use site_config.json instead (recommended)</b><br><br><b>For MCP Inspector testing only.</b> Claude and Chatgpt do NOT need this.<br><br>Use this field (one origin per line). Leave blank for production.",
   "fieldname": "allowed_public_client_origins",
   "fieldtype": "Small Text",
   "label": "Allowed Public Client Origins (Experimental)",
   "depends_on": "eval:doc.enable_dynamic_client_registration"
  },
  {
   "fieldname": "oauth_advanced_section",
   "fieldtype": "Section Break",
   "label": "Advanced Discovery Settings",
   "collapsible": 1,
   "collapsible_depends_on": "eval:0",
   "description": "Controls which OAuth discovery endpoints are exposed. Most users should leave these enabled."
  },
  {
   "default": "1",
   "description": "Exposes OAuth server capabilities at <code>/.well-known/oauth-authorization-server</code>. Required for auto-discovery.",
   "fieldname": "show_auth_server_metadata",
   "fieldtype": "Check",
   "label": "Show Authorization Server Metadata"
  },
  {
   "default": "1",
   "description": "Exposes resource server info at <code>/.well-known/oauth-protected-resource</code>",
   "fieldname": "show_protected_resource_metadata",
   "fieldtype": "Check",
   "label": "Show Protected Resource Metadata"
  },
  {
   "fieldname": "oauth_metadata_section",
   "fieldtype": "Section Break",
   "label": "Resource Metadata (Optional)",
   "collapsible": 1,
   "collapsible_depends_on": "eval:0"
  },
  {
   "default": "Frappe Assistant Core",
   "description": "Display name for your resource server",
   "fieldname": "resource_name",
   "fieldtype": "Data",
   "label": "Resource Name"
  },
  {
   "default": "https://github.com/buildswithpaul/Frappe_Assistant_Core",
   "description": "Documentation URL for developers",
   "fieldname": "resource_documentation",
   "fieldtype": "Data",
   "label": "Documentation URL"
  },
  {
   "fieldname": "oauth_column_break_2",
   "fieldtype": "Column Break"
  },
  {
   "description": "Privacy policy URL",
   "fieldname": "resource_policy_uri",
   "fieldtype": "Data",
   "label": "Policy URI"
  },
  {
   "description": "Terms of service URL",
   "fieldname": "resource_tos_uri",
   "fieldtype": "Data",
   "label": "Terms of Service URI"
  },
  {
   "description": "Supported OAuth scopes (one per line). Leave blank to use default scopes (all, openid).",
   "fieldname": "scopes_supported",
   "fieldtype": "Small Text",
   "label": "Supported Scopes"
  }
 ],
 "issingle": 1,
 "links": [],
 "modified": "2025-08-12 17:50:12.690254",
 "modified_by": "Administrator",
 "module": "Assistant Core",
 "name": "Assistant Core Settings",
 "owner": "Administrator",
 "permissions": [
  {
   "create": 1,
   "delete": 1,
   "email": 1,
   "print": 1,
   "read": 1,
   "role": "System Manager",
   "share": 1,
   "write": 1
  }
 ],
 "sort_field": "modified",
 "sort_order": "DESC",
 "states": [],
 "track_changes": 1
}